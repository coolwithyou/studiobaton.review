# 프로젝트 개요

## 한 줄 요약

**Organization + 연도 + GitHub ID 목록**만 입력하면, 조직 내 전체 저장소를 순회하며 **커밋 기반으로 기여도와 품질을 AI가 분석**하여 **연간 리포트**를 생성하고, **매년 비교 평가**까지 가능한 시스템입니다.

---

## 핵심 가치

### 문제점
- PR/코드 리뷰 문화가 약한 팀은 기여도 평가가 어려움
- 연말/연초마다 수작업으로 커밋 히스토리를 확인해야 함
- 단순 LoC 중심 평가는 의미 없음
- 평가 기준이 흔들리기 쉬움

### 해결책
- **커밋 기반**: PR 없이도 분석 가능
- **Work Unit 클러스터링**: 커밋을 의미 있는 작업 단위로 묶음
- **맥락 기반 평가**: 핵심모듈, 핫스팟, 리스크 반영
- **AI 리뷰**: 객관적이고 구체적인 피드백
- **연속성**: 매년 같은 기준으로 성장 추적

---

## 주요 기능

### 1. 자동 데이터 수집
- GitHub API로 조직 전체 저장소 자동 스캔
- 연도 범위 + 작성자 필터링으로 커밋 수집
- 파일별 변경 통계 저장

### 2. Work Unit 클러스터링
- 시간 간격 기반 그룹핑 (기본 8시간)
- 경로 유사도로 세분화 (Jaccard Similarity)
- 관련 커밋을 논리적 작업 단위로 묶음

### 3. 임팩트 스코어링
```
임팩트 = 기본점수(LoC 캡)
      + 핵심모듈 가중치
      + 핫스팟 가중치  
      + 테스트 비율
      + 설정/스키마 변경
```

### 4. AI 기반 리뷰
- 샘플링으로 비용 최적화 (상위 7 + 랜덤 3 + 특수 2)
- GPT-4o 또는 Claude 3.5 선택 가능
- 구조화된 피드백: 강점, 리스크, 개선안, 학습 포인트

### 5. 연간 리포트 생성
- 정량 지표: 커밋, Work Unit, 임팩트, 저장소별 기여
- 정성 피드백: AI 요약, 강점, 개선 영역, 액션 아이템
- 매니저 코멘트 추가 및 확정 기능

### 6. 다양한 차트
- 월별 활동 추이 (Line Chart)
- 작업 유형 분포 (Pie Chart)
- 저장소별 기여 (Bar Chart)
- 임팩트 요인 분석 (Radar Chart)
- 연도별 비교 (Comparison Chart)

### 7. 연도별 비교
- 전년 대비 변화 추적
- 액션 아이템 달성률
- 성장 포인트 식별

---

## 기술적 특징

### 아키텍처
- **서버리스**: Vercel + Next.js App Router
- **풀스택**: RSC + Server Actions
- **타입 안전**: TypeScript + Prisma
- **모던 UI**: shadcn/ui + Tailwind CSS

### 데이터 처리
- **Job Queue**: Upstash QStash로 백그라운드 처리
- **멱등성**: 모든 Job은 재실행 안전
- **페이지네이션**: GitHub API 자동 페이징
- **진행률 추적**: 실시간 상태 업데이트

### AI 통합
- **Provider 추상화**: OpenAI/Claude 유연하게 전환
- **프롬프트 버전 관리**: 연도 비교 일관성
- **비용 최적화**: 샘플링으로 90% 절감

### 보안
- **iron-session**: 암호화된 쿠키 세션
- **최소 권한**: GitHub App은 읽기 전용
- **미들웨어 인증**: 전역 접근 제어
- **에러 핸들링**: 타입별 재시도 전략

---

## 사용 시나리오

### 시나리오 1: 연말 팀원 평가

**상황**: 2024년 말, 5명 팀원의 연간 기여를 평가해야 함

**절차**:
1. 조직 선택: "studiobaton"
2. 연도: 2024
3. 팀원: 5명 모두 선택
4. 분석 시작 → 15분 후 완료
5. 팀원별 리포트 확인
6. 매니저 코멘트 추가
7. 리포트 확정 → PDF 다운로드

**결과**:
- 각 팀원의 강점/약점/액션아이템 파악
- 객관적 데이터 기반 평가
- 2025년 성장 목표 설정

### 시나리오 2: 분기별 진행 확인

**상황**: 팀 리더가 Q4 활동을 중간 점검

**절차**:
1. 2024년 분석 실행 (10월까지 데이터)
2. 팀원별 진행 상황 확인
3. 액션 아이템 달성도 확인
4. 필요시 1:1 미팅 진행

### 시나리오 3: 신규 입사자 평가

**상황**: 3개월 된 신입의 기여도 확인

**절차**:
1. 특정 기간(3개월) 데이터만 수집
2. Work Unit + AI 리뷰로 작업 패턴 파악
3. 온보딩 성공 여부 확인
4. 다음 분기 목표 설정

---

## 확장 가능성

### 단기 (3개월)
- [ ] PDF 리포트 생성
- [ ] Slack/이메일 알림
- [ ] 조직별 커스텀 임팩트 규칙
- [ ] 팀 코딩 기준 문서 업로드

### 중기 (6개월)
- [ ] 증분 분석 모드 (주간/월간)
- [ ] PR 리뷰 코멘트 분석 (있으면)
- [ ] CI/테스트 결과 연동
- [ ] 더 많은 차트 타입

### 장기 (1년)
- [ ] 팀 전체 벤치마크
- [ ] 기술 스택별 역량 분석
- [ ] 멘토링 매칭 추천
- [ ] OKR 연동

---

## 제약사항

### 기술적 제약
- **커밋 기반**: 커밋 스타일에 따라 왜곡 가능
- **샘플링**: 모든 작업을 AI가 리뷰하지 않음
- **Rate Limit**: GitHub API 제한 (시간당 15,000)
- **LLM 비용**: 대규모 팀은 비용 고려 필요

### 데이터 제약
- **이메일 매핑**: 작성자 식별에 alias 설정 필요
- **Monorepo**: 소유 영역 추정이 필요할 수 있음
- **커밋 품질**: 의미 없는 커밋 메시지는 분석 어려움

### 평가 제약
- **정량적 한계**: 코드 품질을 완전히 수치화할 수 없음
- **맥락 부족**: 업무 성격(고객 대응, 기획 등)은 반영 안 됨
- **최종 판단**: 매니저의 확정이 필수

---

## 비용 구조

### GitHub API
- **무료**: GitHub App 사용 (시간당 15,000 requests)
- **예상**: 중규모 조직 1회 분석 = 약 1,000 requests

### LLM API

**GPT-4o**:
- Input: $5 / 1M tokens
- Output: $15 / 1M tokens
- 예상: 사용자당 $0.05-0.10

**Claude 3.5 Sonnet**:
- Input: $3 / 1M tokens
- Output: $15 / 1M tokens
- 예상: 사용자당 $0.03-0.08

**샘플링 효과**:
- 전체 분석 대비 90% 이상 절감
- 5명 팀 연간 분석: $0.25-0.50

### 인프라

**Vercel**:
- Hobby: 무료 (소규모 적합)
- Pro: $20/월 (중규모 권장)

**Upstash**:
- Free Tier: 월 10,000 messages (QStash)
- Redis: 월 10,000 commands
- 초과 시 종량제

**데이터베이스**:
- Vercel Postgres: $10/월 (256MB)
- Neon: Free tier 가능

**총 예상 비용** (5-20명 팀):
- 월 $30-50 (인프라 + LLM)

---

## 로드맵

### MVP (완료)
- ✅ GitHub App 연동
- ✅ 커밋 수집
- ✅ Work Unit 클러스터링
- ✅ 임팩트 스코어링
- ✅ AI 리뷰 (GPT-4o/Claude)
- ✅ 연간 리포트 생성
- ✅ 대시보드 UI
- ✅ 차트 시각화
- ✅ 연도 비교

### v1.1 (2주)
- [ ] PDF 내보내기
- [ ] GitHub App 설치 온보딩 개선
- [ ] 진행률 실시간 폴링
- [ ] 에러 재시도 UI

### v1.2 (1개월)
- [ ] 조직 설정 페이지
- [ ] 팀 코딩 기준 업로드
- [ ] 이메일 alias 자동 매칭
- [ ] Slack/이메일 알림

### v2.0 (3개월)
- [ ] 증분 분석 모드
- [ ] PR 리뷰 분석 (선택)
- [ ] 테스트 커버리지 추적
- [ ] 팀 벤치마크

---

## 라이선스

MIT License

---

## 문의 및 지원

- **Issues**: [GitHub Issues](https://github.com/your-org/repo/issues)
- **Email**: support@yourdomain.com
- **문서**: `/help` 페이지

---

## 기여자

이 프로젝트를 더 좋게 만들어주신 모든 분께 감사드립니다!

