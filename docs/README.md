# Studiobaton Review - Documentation

ì´ í´ë”ëŠ” Studiobaton Review í”„ë¡œì íŠ¸ì˜ ì£¼ìš” ê¸°ëŠ¥ì— ëŒ€í•œ ë¬¸ì„œë¥¼ í¬í•¨í•˜ê³  ìˆìŠµë‹ˆë‹¤.

## ğŸ“š ë¬¸ì„œ ëª©ë¡

### 1. [ì—…ë¬´ ì¼ì§€ AI ë¶„ì„ ì‹œìŠ¤í…œ](./journal-ai-analysis.md)

**ë‚´ìš©**: ì—…ë¬´ ì¼ì§€ AI ë¶„ì„ ì‹œìŠ¤í…œì˜ ì „ì²´ ì•„í‚¤í…ì²˜, êµ¬í˜„ ìƒì„¸, ë°ì´í„° ëª¨ë¸ ë“±ì„ ë‹¤ë£¹ë‹ˆë‹¤.

**ì£¼ìš” ì£¼ì œ**:
- 3ë‹¨ê³„ ë¶„ì„ í”„ë¡œì„¸ìŠ¤ (ì£¼ìš” ì»¤ë°‹ ì„ ë³„ â†’ ì½”ë“œ ë¦¬ë·° â†’ ì¢…í•© ë¶„ì„)
- ì•„í‚¤í…ì²˜ ë‹¤ì´ì–´ê·¸ë¨
- í”„ë¡¬í”„íŠ¸ ì „ëµ
- ë°ì´í„° ëª¨ë¸ (Prisma Schema)
- API ì—”ë“œí¬ì¸íŠ¸
- ì—ëŸ¬ í•¸ë“¤ë§ ë° Fallback
- ì„±ëŠ¥ ìµœì í™”
- ì‚¬ìš© ì˜ˆì‹œ

**ëŒ€ìƒ ë…ì**: ê°œë°œì, ì‹œìŠ¤í…œ ì•„í‚¤í…íŠ¸

**íŒŒì¼**: `journal-ai-analysis.md`

---

### 2. [AI ë¶„ì„ í”„ë¡¬í”„íŠ¸ ì˜ˆì‹œ](./journal-prompts-examples.md)

**ë‚´ìš©**: ì‹¤ì œ í”„ë¡œì íŠ¸ì—ì„œ ì‚¬ìš©í•˜ëŠ” LLM í”„ë¡¬í”„íŠ¸ì˜ êµ¬ì²´ì ì¸ ì˜ˆì‹œë¥¼ ì œê³µí•©ë‹ˆë‹¤.

**ì£¼ìš” ì£¼ì œ**:
- Stage 1: ì£¼ìš” ì»¤ë°‹ ì„ ë³„ í”„ë¡¬í”„íŠ¸
- Stage 2: ì½”ë“œ ë¦¬ë·° í”„ë¡¬í”„íŠ¸
- Stage 3-1: ì£¼ê°„ ì¢…í•© ë¶„ì„ í”„ë¡¬í”„íŠ¸
- Stage 3-2: ì›”ê°„ ì¢…í•© ë¶„ì„ í”„ë¡¬í”„íŠ¸
- ì‹œìŠ¤í…œ ë©”ì‹œì§€
- LLM ì‘ë‹µ ì˜ˆì‹œ
- í”„ë¡¬í”„íŠ¸ ê°œì„  íŒ

**ëŒ€ìƒ ë…ì**: í”„ë¡¬í”„íŠ¸ ì—”ì§€ë‹ˆì–´, AI ê°œë°œì, ì‹œìŠ¤í…œ ê°œì„  ë‹´ë‹¹ì

**íŒŒì¼**: `journal-prompts-examples.md`

---

## ğŸš€ ë¹ ë¥¸ ì‹œì‘

### ì—…ë¬´ ì¼ì§€ AI ë¶„ì„ ì‹œìŠ¤í…œ ì´í•´í•˜ê¸°

1. **ì•„í‚¤í…ì²˜ íŒŒì•…**: [journal-ai-analysis.md#ì•„í‚¤í…ì²˜](./journal-ai-analysis.md#ì•„í‚¤í…ì²˜)
2. **3ë‹¨ê³„ í”„ë¡œì„¸ìŠ¤**: [journal-ai-analysis.md#3ë‹¨ê³„-ë¶„ì„-í”„ë¡œì„¸ìŠ¤](./journal-ai-analysis.md#3ë‹¨ê³„-ë¶„ì„-í”„ë¡œì„¸ìŠ¤)
3. **API ì‚¬ìš©ë²•**: [journal-ai-analysis.md#api-ì—”ë“œí¬ì¸íŠ¸](./journal-ai-analysis.md#api-ì—”ë“œí¬ì¸íŠ¸)

### í”„ë¡¬í”„íŠ¸ ê°œì„  ì‘ì—…

1. **í˜„ì¬ í”„ë¡¬í”„íŠ¸ í™•ì¸**: [journal-prompts-examples.md](./journal-prompts-examples.md)
2. **í”„ë¡¬í”„íŠ¸ ì½”ë“œ**: `src/lib/journal/prompts.ts`
3. **ê°œì„  íŒ**: [journal-prompts-examples.md#í”„ë¡¬í”„íŠ¸-ê°œì„ -íŒ](./journal-prompts-examples.md#í”„ë¡¬í”„íŠ¸-ê°œì„ -íŒ)

---

## ğŸ”§ ì£¼ìš” êµ¬ì„± ìš”ì†Œ

### í•µì‹¬ ë¼ì´ë¸ŒëŸ¬ë¦¬

```typescript
// AI ë¶„ì„ ì—”ì§„
import { JournalAnalyzer } from "@/lib/journal/analyzer";

// í”„ë¡¬í”„íŠ¸ ë¹Œë”
import {
  buildStage1Prompt,
  buildStage2Prompt,
  buildStage3WeeklyPrompt,
  buildStage3MonthlyPrompt,
} from "@/lib/journal/prompts";

// ë‚ ì§œ/ì£¼ì°¨ ê³„ì‚°
import { generateYearWeeks, getWeeksInMonth } from "@/lib/journal/utils";
```

### API ì—”ë“œí¬ì¸íŠ¸

```
POST /api/analysis/[runId]/journal/analyze-week
POST /api/analysis/[runId]/journal/analyze-month  (SSE)
GET  /api/analysis/[runId]/journal/analyses
```

### UI ì»´í¬ë„ŒíŠ¸

```typescript
// ë©”ì¸ í˜ì´ì§€
import JournalPageClient from "@/app/(dashboard)/organizations/[login]/analysis/[runId]/journal/page-new";

// ì‚¬ì´ë“œë°”
import { JournalSidebar } from "@/components/journal/journal-sidebar";

// ë·°
import { MonthReportView } from "@/components/journal/views/month-report-view";
import { WeekReportView } from "@/components/journal/views/week-report-view";
```

---

## ğŸ“Š ë°ì´í„° í”Œë¡œìš°

```
ì‚¬ìš©ì ìš”ì²­
    â†“
API Route (analyze-week / analyze-month)
    â†“
JournalAnalyzer
    â”œâ”€ Stage 1: selectKeyCommits() â†’ OpenAI GPT-4o
    â”œâ”€ Stage 2: reviewCommit() â†’ GitHub API + OpenAI
    â””â”€ Stage 3: synthesizeWeekly/Monthly() â†’ OpenAI
    â†“
DB ì €ì¥ (WeeklyAnalysis / MonthlyAnalysis)
    â†“
UI ì—…ë°ì´íŠ¸
```

---

## ğŸ› ë””ë²„ê¹…

### ë¡œê·¸ í™•ì¸

```bash
# ê°œë°œ ì„œë²„ ì‹¤í–‰
pnpm dev

# ë¡œê·¸ íŒ¨í„´
[analyze-week] Week 45: 2025-11-02 ~ 2025-11-09
[analyze-week] Found 37 commits
[selectKeyCommits] LLM returned 5 key commits
[selectKeyCommits] Matched 5 commits
```

### ì£¼ìš” ì´ìŠˆ í•´ê²°

**ë¬¸ì œ**: "ì´ ê¸°ê°„ì—ëŠ” í™œë™ì´ ì—†ì—ˆìŠµë‹ˆë‹¤" ì˜¤ë¥˜

**í•´ê²°**: [journal-ai-analysis.md#ì—ëŸ¬-í•¸ë“¤ë§](./journal-ai-analysis.md#ì—ëŸ¬-í•¸ë“¤ë§)

---

## ğŸ” í™˜ê²½ ë³€ìˆ˜

```env
# OpenAI
OPENAI_API_KEY=sk-...

# GitHub
GITHUB_APP_ID=...
GITHUB_APP_PRIVATE_KEY=...

# Database
DATABASE_URL=postgresql://...
```

---

## ğŸ“ˆ ì„±ëŠ¥ ë©”íŠ¸ë¦­

| ë‹¨ê³„             | í‰ê·  ì†Œìš” ì‹œê°„ | í† í° ì‚¬ìš©ëŸ‰  |
| ---------------- | -------------- | ------------ |
| Stage 1          | 2-3ì´ˆ          | ~500 tokens  |
| Stage 2 (ì»¤ë°‹ë‹¹) | 3-5ì´ˆ          | ~800 tokens  |
| Stage 3 (ì£¼ê°„)   | 3-4ì´ˆ          | ~600 tokens  |
| Stage 3 (ì›”ê°„)   | 4-6ì´ˆ          | ~1000 tokens |

**ì „ì²´ ì£¼ê°„ ë¶„ì„**: ~30-50ì´ˆ (5ê°œ ì»¤ë°‹ ê¸°ì¤€)  
**ì „ì²´ ì›”ê°„ ë¶„ì„**: ~3-5ë¶„ (4ì£¼ì°¨ ê¸°ì¤€, SSEë¡œ ì§„í–‰ ìƒí™© í‘œì‹œ)

---

## ğŸ¤ ê¸°ì—¬ ê°€ì´ë“œ

### í”„ë¡¬í”„íŠ¸ ê°œì„ 

1. `src/lib/journal/prompts.ts` ìˆ˜ì •
2. `docs/journal-prompts-examples.md` ì—…ë°ì´íŠ¸
3. í…ŒìŠ¤íŠ¸ ì‹¤í–‰ ë° ê²°ê³¼ í™•ì¸

### ìƒˆë¡œìš´ ë¶„ì„ ê¸°ëŠ¥ ì¶”ê°€

1. `src/lib/journal/analyzer.ts`ì— ë©”ì„œë“œ ì¶”ê°€
2. API Route êµ¬í˜„
3. UI ì»´í¬ë„ŒíŠ¸ ì—°ê²°
4. ë¬¸ì„œ ì—…ë°ì´íŠ¸

---

## ğŸ“ ë¬¸ì˜ ë° ì§€ì›

í”„ë¡œì íŠ¸ì— ëŒ€í•œ ì§ˆë¬¸ì´ë‚˜ ì œì•ˆì‚¬í•­ì´ ìˆìœ¼ì‹œë©´ ì´ìŠˆë¥¼ ë“±ë¡í•´ì£¼ì„¸ìš”.

---

**ìµœì¢… ì—…ë°ì´íŠ¸**: 2025-12-14  
**ë¬¸ì„œ ë²„ì „**: 1.0.0
